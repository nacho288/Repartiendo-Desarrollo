{"version":3,"sources":["services/Delivery/user/actions.js","components/Delivery/Login/index.js"],"names":["__webpack_require__","d","__webpack_exports__","loginDeliveryUser","logoutDeliveryUser","updateDeliveryUserInfo","updateDeliveryOrderHistory","_actionTypes__WEBPACK_IMPORTED_MODULE_0__","_configs__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","email","password","dispatch","Axios","post","LOGIN_DELIVERY_USER_URL","then","response","delivery_user","data","type","LOGIN_DELIVERY_USER","payload","catch","error","console","log","LOGOUT_DELIVERY_USER","user_id","token","UPDATE_DELIVERY_USER_INFO_URL","order_history","orders","UPDATE_DELIVERY_USER_INFO","UPDATE_DELIVERY_ORDER_HISTORY","Login","state","loading","handleOnChange","event","_this","props","getSingleLanguageData","target","value","localStorage","setItem","handleInputEmail","setState","handleInputPassword","handleLogin","preventDefault","this","getSettings","getAllLanguages","nextProps","success","languages","getItem","length","id","filter","lang","is_default","window","innerWidth","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_router__WEBPACK_IMPORTED_MODULE_7__","to","Fragment","_helpers_meta__WEBPACK_IMPORTED_MODULE_6__","seotitle","seodescription","ogtype","ogtitle","ogdescription","ogurl","location","href","twittertitle","twitterdescription","src","className","alt","style","backgroundColor","height","onSubmit","name","onChange","defaultValue","map","language","key","language_name","Component","contextTypes","router","connect"],"mappings":"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","file":"static/js/21.eb32c5b1.chunk.js","sourcesContent":["import { LOGIN_DELIVERY_USER, LOGOUT_DELIVERY_USER, UPDATE_DELIVERY_USER_INFO, UPDATE_DELIVERY_ORDER_HISTORY } from \"./actionTypes\";\r\nimport { LOGIN_DELIVERY_USER_URL, UPDATE_DELIVERY_USER_INFO_URL } from \"../../../configs\";\r\n\r\nimport Axios from \"axios\";\r\n\r\nexport const loginDeliveryUser = (email, password) => dispatch => {\r\n    Axios.post(LOGIN_DELIVERY_USER_URL, {\r\n        email: email,\r\n        password: password\r\n    })\r\n        .then(response => {\r\n            const delivery_user = response.data;\r\n            return dispatch({ type: LOGIN_DELIVERY_USER, payload: delivery_user });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nexport const logoutDeliveryUser = delivery_user => dispatch => {\r\n    delivery_user = [];\r\n    dispatch({\r\n        type: LOGOUT_DELIVERY_USER,\r\n        payload: delivery_user\r\n    });\r\n};\r\n\r\nexport const updateDeliveryUserInfo = (user_id, token) => dispatch => {\r\n    Axios.post(UPDATE_DELIVERY_USER_INFO_URL, {\r\n        token: token,\r\n        user_id: user_id\r\n    })\r\n        .then(response => {\r\n            const data = { delivery_user: response.data, order_history: response.data.data.orders };\r\n            return dispatch({ type: UPDATE_DELIVERY_USER_INFO, payload: data });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nexport const updateDeliveryOrderHistory = order_history => dispatch => {\r\n    dispatch({\r\n        type: UPDATE_DELIVERY_ORDER_HISTORY,\r\n        payload: order_history\r\n    });\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nimport Meta from \"../../helpers/meta\";\r\nimport { Redirect } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSettings } from \"../../../services/settings/actions\";\r\nimport { loginDeliveryUser } from \"../../../services/Delivery/user/actions\";\r\nimport { getAllLanguages } from \"../../../services/languages/actions\";\r\nimport { getSingleLanguageData } from \"../../../services/languages/actions\";\r\n\r\nclass Login extends Component {\r\n\tstate = {\r\n\t\tloading: false,\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\terror: false,\r\n\t};\r\n\tstatic contextTypes = {\r\n\t\trouter: () => null,\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getSettings();\r\n\r\n\t\t// setTimeout(() => {\r\n\t\t// \tthis.setState({ error: false });\r\n\t\t// }, 380);\r\n\r\n\t\tthis.props.getAllLanguages();\r\n\t}\r\n\r\n\thandleOnChange = (event) => {\r\n\t\t// console.log(event.target.value);\r\n\t\tthis.props.getSingleLanguageData(event.target.value);\r\n\t\tlocalStorage.setItem(\"userPreferedLanguage\", event.target.value);\r\n\t};\r\n\r\n\thandleInputEmail = (event) => {\r\n\t\tthis.setState({ email: event.target.value });\r\n\t};\r\n\thandleInputPassword = (event) => {\r\n\t\tthis.setState({ password: event.target.value });\r\n\t};\r\n\r\n\thandleLogin = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tthis.setState({ loading: true });\r\n\t\tthis.props.loginDeliveryUser(this.state.email, this.state.password);\r\n\t};\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tconst { delivery_user } = this.props;\r\n\t\tif (delivery_user !== nextProps.delivery_user) {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t\tif (nextProps.delivery_user.success === false) {\r\n\t\t\t\tthis.setState({ error: true });\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextProps.delivery_user.success) {\r\n\t\t\t// this.context.router.push(\"/delivery\");\r\n\t\t}\r\n\r\n\t\tif (this.props.languages !== nextProps.languages) {\r\n\t\t\tif (localStorage.getItem(\"userPreferedLanguage\")) {\r\n\t\t\t\tthis.props.getSingleLanguageData(localStorage.getItem(\"userPreferedLanguage\"));\r\n\t\t\t} else {\r\n\t\t\t\tif (nextProps.languages.length) {\r\n\t\t\t\t\t// console.log(\"NEXT\", nextProps.languages);\r\n\t\t\t\t\tconst id = nextProps.languages.filter((lang) => lang.is_default === 1)[0].id;\r\n\t\t\t\t\tthis.props.getSingleLanguageData(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tconst { delivery_user } = this.props;\r\n\t\tif (delivery_user.success) {\r\n\t\t\treturn (\r\n\t\t\t\t//redirect to account page\r\n\t\t\t\t<Redirect to={\"/delivery\"} />\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle=\"Login\"\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* PreLoading the loading gif */}\r\n\t\t\t\t<img src=\"/assets/img/loading-food.gif\" className=\"hidden\" alt=\"prefetching\" />\r\n\t\t\t\t{this.state.error && (\r\n\t\t\t\t\t<div className=\"auth-error\">\r\n\t\t\t\t\t\t<div className=\"error-shake\">{localStorage.getItem(\"emailPassDonotMatch\")}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.state.loading && (\r\n\t\t\t\t\t<div className=\"height-100 overlay-loading\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<img src=\"/assets/img/loading-food.gif\" alt={localStorage.getItem(\"pleaseWaitText\")} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div style={{ backgroundColor: \"#f2f4f9\" }}>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<div className=\"input-group-prepend\">\r\n\t\t\t\t\t\t\t<div style={{ height: \"3.5rem\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc=\"/assets/img/login-header.png\"\r\n\t\t\t\t\t\tclassName=\"login-image pull-right mr-15\"\r\n\t\t\t\t\t\talt=\"login-header\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className=\"login-texts px-15 mt-50 pb-20\">\r\n\t\t\t\t\t\t<span className=\"login-title\">{localStorage.getItem(\"loginLoginTitle\")}</span>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<span className=\"login-subtitle\">{localStorage.getItem(\"loginLoginSubTitle\")}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"height-70 bg-white\">\r\n\t\t\t\t\t<form onSubmit={this.handleLogin}>\r\n\t\t\t\t\t\t<div className=\"form-group px-15 pt-30\">\r\n\t\t\t\t\t\t\t<label className=\"col-12 edit-address-input-label\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"loginLoginEmailLabel\")}\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"col-md-9 pb-5\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputEmail}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control edit-address-input\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<label className=\"col-12 edit-address-input-label\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"loginLoginPasswordLabel\")}\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"col-md-9\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputPassword}\r\n\t\t\t\t\t\t\t\t\tclassName=\"form-control edit-address-input\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"mt-20 px-15 pt-15 button-block\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-main\"\r\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: localStorage.getItem(\"storeColor\") }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"loginLoginTitle\")}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t{this.props.languages && this.props.languages.length > 1 && (\r\n\t\t\t\t\t\t<div className=\"mt-100 d-flex align-items-center justify-content-center\">\r\n\t\t\t\t\t\t\t<div className=\"mr-2\">{localStorage.getItem(\"changeLanguageText\")}</div>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tonChange={this.handleOnChange}\r\n\t\t\t\t\t\t\t\tdefaultValue={\r\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userPreferedLanguage\")\r\n\t\t\t\t\t\t\t\t\t\t? localStorage.getItem(\"userPreferedLanguage\")\r\n\t\t\t\t\t\t\t\t\t\t: this.props.languages.filter((lang) => lang.is_default === 1)[0].id\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"form-control language-select\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.props.languages.map((language) => (\r\n\t\t\t\t\t\t\t\t\t<option value={language.id} key={language.id}>\r\n\t\t\t\t\t\t\t\t\t\t{language.language_name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tdelivery_user: state.delivery_user.delivery_user,\r\n\tlanguages: state.languages.languages,\r\n\tlanguage: state.languages.language,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ loginDeliveryUser, getSettings, getAllLanguages, getSingleLanguageData }\r\n)(Login);\r\n"],"sourceRoot":""}