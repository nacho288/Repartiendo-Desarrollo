{"version":3,"sources":["components/Mobile/Home/RestaurantListOnCategory/index.js","services/restaurant/actions.js"],"names":["RestaurantListOnCategory","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","selectedOption","options","defaultValues","checkboxChecked","checkedCount","loading","_processSelectedCheckboxs","setState","checkboxes","document","querySelectorAll","i","push","value","parseInt","getAttribute","label","Promise","resolve","reject","localStorage","setItem","JSON","stringify","categorySelectOptions","parse","getItem","latandlng","categoryIds","map","restaurantCategories","props","getRestaurantsBasedOnCategory","lat","lng","sortRestaurantCategoriesOptions","Error","console","log","removeItem","callAfterDefaultRestaurantsCategoriesSelected","handleChange","selectRestaurantsCategories","restaurants_categories","arr","categories","restaurantCatogory","restaurantCateories","id","name","checkIfChecked","some","allSelectableOptions","checkedOptions","Set","category","sortedOptions","toConsumableArray","filter","has","inherits","createClass","key","getRestaurantsCategories","nextProps","filtered_restaurants","prevProps","filterRestaurants","_this2","window","innerWidth","react_default","a","createElement","Redirect","to","_this$props","history","user","Fragment","meta","seotitle","seodescription","ogtype","ogtitle","ogdescription","ogurl","location","href","twittertitle","twitterdescription","Nav","logo","logoLink","active_nearme","disable_back_button","loggedin","success","className","ref","style","position","type","defaultChecked","onChange","data-label","data-value","ink_default","duration","hasTouch","react_content_loader_es","height","width","speed","primaryColor","secondaryColor","x","y","rx","ry","src","alt","restaurant","index","delayLink","slug","delay","clickAction","delivery_type","is_featured","lib_default","image","description","color","rating","delivery_time","price_range","slides","PromoSlider","size","secondarySlider","Component","connect","category_ids","dispatch","Axios","post","GET_FILTERED_RESTAURANTS_URL","latitude","longitude","then","response","data","GET_RESTAURANTS_BASED_ON_CATEGORY","payload","catch","error","GET_RESTAURANTS_CATEGORIES_URL","GET_RESTAURANTS_CATEGORIES"],"mappings":"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","file":"static/js/27.629c0715.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport { getRestaurantsBasedOnCategory, getRestaurantsCategories } from \"../../../../services/restaurant/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport ContentLoader from \"react-content-loader\";\r\nimport DelayLink from \"../../../helpers/delayLink\";\r\nimport Ink from \"react-ink\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport PromoSlider from \"../PromoSlider\";\r\n\r\nimport { Redirect } from \"react-router\";\r\n\r\nimport Meta from \"../../../helpers/meta\";\r\nimport Nav from \"../../Nav\";\r\n\r\nexport class RestaurantListOnCategory extends Component {\r\n\tstate = {\r\n\t\tselectedOption: null,\r\n\t\toptions: [],\r\n\t\tdefaultValues: [],\r\n\t\tcheckboxChecked: false,\r\n\t\tcheckedCount: 0,\r\n\t\tloading: true,\r\n\t};\r\n\r\n\t//getting all restaurants before rendering\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getRestaurantsCategories();\r\n\r\n\t\tthis.setState({ checkedCount: JSON.parse(localStorage.getItem(\"categorySelectOptions\")).length });\r\n\t}\r\n\r\n\t_processSelectedCheckboxs = () => {\r\n\t\tthis.setState({ loading: true });\r\n\t\tlet selectedOption = [];\r\n\r\n\t\tlet checkboxes = document.querySelectorAll(\"input[type=checkbox]:checked\");\r\n\t\tthis.setState({ checkedCount: checkboxes.length });\r\n\r\n\t\t// console.log(checkboxes.length);\r\n\r\n\t\tif (checkboxes.length === 0) {\r\n\t\t\tconsole.log(\"Came here\");\r\n\r\n\t\t\tlocalStorage.removeItem(\"categorySelectOptions\");\r\n\t\t} else {\r\n\t\t\tfor (let i = 0; i < checkboxes.length; i++) {\r\n\t\t\t\tselectedOption.push({\r\n\t\t\t\t\tvalue: parseInt(checkboxes[i].getAttribute(\"data-value\")),\r\n\t\t\t\t\tlabel: checkboxes[i].getAttribute(\"data-label\"),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tlocalStorage.setItem(\"categorySelectOptions\", JSON.stringify(selectedOption));\r\n\t\t\t\tlet categorySelectOptions = JSON.parse(localStorage.getItem(\"categorySelectOptions\"));\r\n\t\t\t\tlet latandlng = JSON.parse(localStorage.getItem(\"userSetAddress\"));\r\n\r\n\t\t\t\tif (categorySelectOptions) {\r\n\t\t\t\t\tlet categoryIds = [];\r\n\t\t\t\t\tcategorySelectOptions.map((restaurantCategories) => {\r\n\t\t\t\t\t\treturn categoryIds.push(parseInt(restaurantCategories.value));\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.props.getRestaurantsBasedOnCategory(latandlng.lat, latandlng.lng, categoryIds);\r\n\t\t\t\t}\r\n\t\t\t\tlet data = JSON.parse(localStorage.getItem(\"categorySelectOptions\"));\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tresolve(this.sortRestaurantCategoriesOptions());\r\n\t\t\t\t} else {\r\n\t\t\t\t\treject(new Error(\"Promise rejected\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// called when you click category from restaurant list page\r\n\tfilterRestaurants() {\r\n\t\tlet categorySelectOptions = JSON.parse(localStorage.getItem(\"categorySelectOptions\"));\r\n\t\tlet latandlng = JSON.parse(localStorage.getItem(\"userSetAddress\"));\r\n\r\n\t\tif (categorySelectOptions) {\r\n\t\t\tlet categoryIds = [];\r\n\t\t\tcategorySelectOptions.map((restaurantCategories) => {\r\n\t\t\t\treturn categoryIds.push(parseInt(restaurantCategories.value));\r\n\t\t\t});\r\n\t\t\tthis.props.getRestaurantsBasedOnCategory(latandlng.lat, latandlng.lng, categoryIds);\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (this.props.restaurants_categories.categories !== nextProps.restaurants_categories.categories) {\r\n\t\t\tthis.setState({ selectedOption: nextProps.restaurants_categories.categories });\r\n\t\t}\r\n\r\n\t\tif (this.props.filtered_restaurants !== nextProps.filtered_restaurants) {\r\n\t\t\tthis.setState({ loading: false });\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.restaurants_categories !== prevProps.restaurants_categories) {\r\n\t\t\tthis.filterRestaurants();\r\n\t\t\tthis.selectRestaurantsCategories(this.props.restaurants_categories);\r\n\t\t}\r\n\t}\r\n\r\n\tcallAfterDefaultRestaurantsCategoriesSelected = () => {\r\n\t\tthis.handleChange(this.state.defaultValues);\r\n\t};\r\n\r\n\tselectRestaurantsCategories = (restaurants_categories) => {\r\n\t\tlet arr = [];\r\n\t\tif (restaurants_categories) {\r\n\t\t\trestaurants_categories.categories.map((restaurantCatogory) => {\r\n\t\t\t\tlet restaurantCateories = {\r\n\t\t\t\t\tvalue: restaurantCatogory.id,\r\n\t\t\t\t\tlabel: restaurantCatogory.name,\r\n\t\t\t\t};\r\n\t\t\t\tif (restaurantCateories) {\r\n\t\t\t\t\tarr.push(restaurantCateories);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t});\r\n\t\t\tif (arr.length > 0) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\toptions: arr,\r\n\t\t\t\t});\r\n\t\t\t\tlocalStorage.setItem(\"allSelectableOptions\", JSON.stringify(arr));\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tlet data = JSON.parse(localStorage.getItem(\"allSelectableOptions\"));\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tresolve(this.sortRestaurantCategoriesOptions());\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error(\"Promise rejected\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcheckIfChecked = (value) => {\r\n\t\treturn JSON.parse(localStorage.getItem(\"categorySelectOptions\")).some(\r\n\t\t\t(categories) => value === categories.value\r\n\t\t);\r\n\t};\r\n\r\n\tsortRestaurantCategoriesOptions = () => {\r\n\t\tlet categorySelectOptions = JSON.parse(localStorage.getItem(\"categorySelectOptions\"));\r\n\t\tlet allSelectableOptions = JSON.parse(localStorage.getItem(\"allSelectableOptions\"));\r\n\r\n\t\tlet checkedOptions = new Set(categorySelectOptions.map((category) => category.value));\r\n\t\tlet sortedOptions = [\r\n\t\t\t...categorySelectOptions,\r\n\t\t\t...allSelectableOptions.filter((category) => !checkedOptions.has(category.value)),\r\n\t\t];\r\n\r\n\t\tif (sortedOptions.length === allSelectableOptions.length) {\r\n\t\t\tthis.setState({\r\n\t\t\t\toptions: sortedOptions,\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (window.innerWidth > 768) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"categorySelectOptions\") === null) {\r\n\t\t\treturn <Redirect to=\"/\" />;\r\n\t\t}\r\n\t\tif (localStorage.getItem(\"userSetAddress\") === null) {\r\n\t\t\t// this.context.router.history.push(\"/search-location\");\r\n\t\t\tconsole.log(\"Redirect to search location\");\r\n\t\t\treturn <Redirect to=\"/search-location\" />;\r\n\t\t}\r\n\r\n\t\tconst { selectedOption } = this.state;\r\n\t\tconst { history, user } = this.props;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Meta\r\n\t\t\t\t\tseotitle={localStorage.getItem(\"seoMetaTitle\")}\r\n\t\t\t\t\tseodescription={localStorage.getItem(\"seoMetaDescription\")}\r\n\t\t\t\t\togtype=\"website\"\r\n\t\t\t\t\togtitle={localStorage.getItem(\"seoOgTitle\")}\r\n\t\t\t\t\togdescription={localStorage.getItem(\"seoOgDescription\")}\r\n\t\t\t\t\togurl={window.location.href}\r\n\t\t\t\t\ttwittertitle={localStorage.getItem(\"seoTwitterTitle\")}\r\n\t\t\t\t\ttwitterdescription={localStorage.getItem(\"seoTwitterDescription\")}\r\n\t\t\t\t/>\r\n\t\t\t\t<Nav\r\n\t\t\t\t\tlogo={true}\r\n\t\t\t\t\tlogoLink={true}\r\n\t\t\t\t\tactive_nearme={true}\r\n\t\t\t\t\tdisable_back_button={true}\r\n\t\t\t\t\thistory={history}\r\n\t\t\t\t\tloggedin={user.success}\r\n\t\t\t\t/>\r\n\t\t\t\t{this.state.options.length > 0 && selectedOption !== null && (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t<div className=\"category-checkboxes-block px-15 mt-20\" ref=\"categoryOptions\">\r\n\t\t\t\t\t\t\t<div className=\"filter-count-block\">\r\n\t\t\t\t\t\t\t\t{localStorage.getItem(\"categoriesFiltersText\")} {this.state.checkedCount}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{this.state.options.map((category) => (\r\n\t\t\t\t\t\t\t\t<label key={category.value} style={{ position: \"relative\" }}>\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={category.value}\r\n\t\t\t\t\t\t\t\t\t\tdefaultChecked={this.checkIfChecked(category.value)}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this._processSelectedCheckboxs}\r\n\t\t\t\t\t\t\t\t\t\tdata-label={category.label}\r\n\t\t\t\t\t\t\t\t\t\tdata-value={category.value}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<span>{category.label}</span>\r\n\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" hasTouch={true} />\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.state.loading ? (\r\n\t\t\t\t\t<ContentLoader height={378} width={400} speed={1.2} primaryColor=\"#f3f3f3\" secondaryColor=\"#ecebeb\">\r\n\t\t\t\t\t\t<rect x=\"20\" y=\"20\" rx=\"4\" ry=\"4\" width=\"80\" height=\"78\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"30\" rx=\"0\" ry=\"0\" width=\"115\" height=\"18\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"60\" rx=\"0\" ry=\"0\" width=\"165\" height=\"16\" />\r\n\r\n\t\t\t\t\t\t<rect x=\"20\" y=\"145\" rx=\"4\" ry=\"4\" width=\"80\" height=\"78\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"155\" rx=\"0\" ry=\"0\" width=\"115\" height=\"18\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"185\" rx=\"0\" ry=\"0\" width=\"165\" height=\"16\" />\r\n\r\n\t\t\t\t\t\t<rect x=\"20\" y=\"270\" rx=\"4\" ry=\"4\" width=\"80\" height=\"78\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"280\" rx=\"0\" ry=\"0\" width=\"115\" height=\"18\" />\r\n\t\t\t\t\t\t<rect x=\"144\" y=\"310\" rx=\"0\" ry=\"0\" width=\"165\" height=\"16\" />\r\n\t\t\t\t\t</ContentLoader>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t{this.props.filtered_restaurants.length === 0 ? (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center mt-100\">\r\n\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"explore-bg\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/various/explore-bg.png\"\r\n\t\t\t\t\t\t\t\t\t\talt={localStorage.getItem(\"restaurantSearchPlaceholder\")}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<h4 className=\"d-flex justify-content-center filter-no-found\">\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"categoriesNoRestaurantsFoundText\")}\r\n\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tthis.props.filtered_restaurants.map((restaurant, index) => (\r\n\t\t\t\t\t\t\t\t<React.Fragment key={restaurant.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-xs-12 col-sm-12 restaurant-block\">\r\n\t\t\t\t\t\t\t\t\t\t<DelayLink\r\n\t\t\t\t\t\t\t\t\t\t\tto={\"../stores/\" + restaurant.slug}\r\n\t\t\t\t\t\t\t\t\t\t\tdelay={200}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block text-center mb-3\"\r\n\t\t\t\t\t\t\t\t\t\t\tclickAction={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"DELIVERY\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant.delivery_type === 1 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"SELFPICKUP\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant.delivery_type === 2 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"SELFPICKUP\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"DELIVERY\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant.delivery_type === 3 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"DELIVERY\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"userPreferredSelection\") === \"SELFPICKUP\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant.delivery_type === 3 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem(\"userSelected\", \"SELFPICKUP\");\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`block-content block-content-full ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trestaurant.is_featured\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"ribbon ribbon-bookmark ribbon-warning pt-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"pt-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t} `}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.is_featured ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"ribbon-box\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"restaurantFeaturedText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LazyLoad>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={restaurant.image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={restaurant.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"restaurant-image\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</LazyLoad>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-content block-content-full restaurant-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"font-w600 mb-5 text-dark\">{restaurant.name}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"font-size-sm text-muted truncate-text text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<hr className=\"my-10\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center restaurant-meta mt-5 d-flex align-items-center justify-content-between text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-2 p-0 text-left\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fa fa-star pr-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: localStorage.getItem(\"storeColor\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.rating}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-4 p-0 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-clock pr-1\" /> {restaurant.delivery_time}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"homePageMinsText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-6 p-0 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"si si-wallet pr-1\" />{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"left\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{restaurant.price_range}{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"currencySymbolAlign\") === \"right\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocalStorage.getItem(\"currencyFormat\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"homePageForTwoText\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<Ink duration=\"500\" hasTouch={false} />\r\n\t\t\t\t\t\t\t\t\t\t</DelayLink>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{localStorage.getItem(\"showPromoSlider\") === \"true\" && (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.props.slides && this.props.slides.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{index ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.slides[0][\"promo_slider\"][\"position_id\"] - 1 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PromoSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tslides={this.props.slides}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={this.props.slides[0][\"promo_slider\"][\"size\"]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsecondarySlider={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t)}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\trestaurants_categories: state.restaurant.restaurants_categories,\r\n\tfiltered_restaurants: state.restaurant.filtered_restaurants,\r\n\tuser: state.user.user,\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ getRestaurantsBasedOnCategory, getRestaurantsCategories }\r\n)(RestaurantListOnCategory);\r\n","import { CHECK_RESTAURANT_OPERATION_SERVICE, GET_RESTAURANTS_BASED_ON_CATEGORY, GET_RESTAURANTS_CATEGORIES } from \"./actionTypes\";\r\nimport { CHECK_RESTAURANT_OPERATION_SERVICE_URL, GET_RESTAURANTS_CATEGORIES_URL, GET_FILTERED_RESTAURANTS_URL } from \"../../configs\";\r\nimport Axios from \"axios\";\r\n\r\nexport const checkRestaurantOperationService = (restaurant_id, latitude, longitude) => dispatch => {\r\n    Axios.post(CHECK_RESTAURANT_OPERATION_SERVICE_URL, {\r\n        restaurant_id: restaurant_id,\r\n        latitude: latitude,\r\n        longitude: longitude\r\n    })\r\n        .then(response => {\r\n            const coupon = response.data;\r\n            return dispatch({ type: CHECK_RESTAURANT_OPERATION_SERVICE, payload: coupon });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nexport const getRestaurantsBasedOnCategory = (lat, lng, category_ids) => dispatch => {\r\n    Axios.post(GET_FILTERED_RESTAURANTS_URL, {\r\n        latitude: lat,\r\n        longitude: lng,\r\n        category_ids: category_ids\r\n    })\r\n        .then(response => {\r\n            const filtered_restaurants = response.data;\r\n            return dispatch({\r\n                type: GET_RESTAURANTS_BASED_ON_CATEGORY,\r\n                payload: filtered_restaurants\r\n            });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n\r\nexport const getRestaurantsCategories = slug => dispatch => {\r\n    Axios.post(GET_RESTAURANTS_CATEGORIES_URL)\r\n        .then(response => {\r\n            const restaurants_categories = response.data;\r\n            return dispatch({\r\n                type: GET_RESTAURANTS_CATEGORIES,\r\n                payload: restaurants_categories\r\n            });\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);\r\n        });\r\n};\r\n"],"sourceRoot":""}